TransApp.controller("routeController",function($scope,$rootScope,$location,TimeTable){var trips=[];$scope.message=!1;var departTimes,arriveTimes;TimeTable.getTimes($rootScope.depart).then(function(times){return departTimes=times.T,console.log(departTimes),console.log(times),TimeTable.getTimes($rootScope.arrive)}).then(function(times){arriveTimes=times.T,console.log(arriveTimes),departTimes.forEach(function(dt){arriveTimes.forEach(function(at){if(dt.TargetedVehicleJourney.DatedVehicleJourneyRef===at.TargetedVehicleJourney.DatedVehicleJourneyRef&&dt.TargetedVehicleJourney.TargetedCall.AimedDepartureTime<at.TargetedVehicleJourney.TargetedCall.AimedArrivalTime){var obj={},depart=new Date(dt.TargetedVehicleJourney.TargetedCall.AimedDepartureTime);obj.depart=depart.toTimeString();var arrive=new Date(at.TargetedVehicleJourney.TargetedCall.AimedArrivalTime);obj.arrive=arrive.toTimeString(),trips.push(obj),console.log(obj)}})}),0==trips.length&&($scope.message=!0),$scope.$apply(function(){$scope.trips=trips})})});